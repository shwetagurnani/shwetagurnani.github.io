mask = (1 << i) - 1;
x &= mask;
